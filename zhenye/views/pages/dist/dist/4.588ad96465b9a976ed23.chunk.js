webpackJsonp([4],{803:function(e,t,a){"use strict";function r(e){n||a(864)}Object.defineProperty(t,"__esModule",{value:!0});var o=a(866),l=a.n(o),s=a(868),i=a.n(s),n=!1,d=a(19),u=r,c=d(l.a,i.a,!1,u,"data-v-568e15ce",null);c.options.__file="src\\views\\html\\system\\Userlist.vue",c.esModule&&Object.keys(c.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),t.default=c.exports},864:function(e,t,a){var r=a(865);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(48)("b311a51a",r,!1)},865:function(e,t,a){t=e.exports=a(47)(void 0),t.push([e.i,"",""])},866:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(117),o=a(172),l=a(867),s=function(e){return e&&e.__esModule?e:{default:e}}(l);t.default={data:function(){var e=this;return{addUpdate:!1,title:"增加",currentPageIdx:1,pageNum:null,delArr:[],ifLoading:!0,user_id:null,ifDelete:!1,departName:null,column_frist:[{type:"selection",width:80,align:"center"},{title:"用户ID",key:"user_id",width:80},{title:"用户名",key:"username"},{title:"角色",key:"roleName",render:function(t,a){var r="";return e.rolelist.map(function(e,t){e.roleId==a.row.roleId&&(r=e.roleName)}),t("div",r)}},{title:"手机号",key:"mobile"},{title:"邮箱",key:"email"},{title:"操作",render:function(t,a){return[t("Button",{props:{type:"info",size:"small",disabled:"admin"===a.row.username},on:{click:function(){var t=a.row;e.addUpdate=!0,e.title="修改",e.user_id=t.user_id,e.formValidate={username:t.username,email:t.email,role:Number(t.roldId),mobile:t.mobile}}}},"查看 / 编辑")]}}],userpage:[],rolelist:[],formValidate:{username:"",email:"",role:"",mobile:"",password:""},ruleValidate:s.default}},methods:{changePage:function(e){this.currentPageIdx=e,this.freshPage({pageNo:e,pageSize:10})},select:function(e){var t=this;this.delArr=[],e.forEach(function(e){t.delArr.push(e.user_id)})},addUserBtn:function(){this.addUpdate=!0,this.title="增加",this.formValidate={username:"",email:"",role:"1111",mobile:"",password:""}},confirmDel:function(){var e=this;(0,o.delEmployee)({user_id:this.delArr}).then(function(t){t.code?e.$Message.error("删除失败！"):(e.freshPage(),e.$Message.success("删除成功！"))}).catch(function(e){console.log(e)})},refreshPageManual:function(){this.freshPage({pageNo:this.currentPageIdx,pageSize:10})},freshPage:function(e){var t=this;this.ifLoading=!0,(0,o.queryEmployee)(e).then(function(e){console.log(e),200==e.status?(t.userpage=e.data,t.ifLoading=!1,t.pageNum=e.total):t.$Message.error(e.msg)}).catch(function(e){return console.log(e)})},roleList:function(e){var t=this;(0,o.roleManage)(e).then(function(e){e.code?t.$Message.error(e.msg):t.rolelist=e.data},function(e){console.log(e)})},handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e?"增加"===t.title?(0,o.getUseradd)(t.formValidate).then(function(e){"200"===e.status?(t.$Message.success(e.msg),t.freshPage({pageNo:1,pageSize:10}),t.addUpdate=!1):t.$Message.error(e.msg)}).catch(function(e){console.log(e)}):(t.formValidate.user_id=t.user_id,(0,o.getUserUpdate)(t.formValidate).then(function(e){"200"===e.status?(t.$Message.success(e.msg),t.freshPage({pageNo:1,pageSize:10}),t.addUpdate=!1):t.$Message.error(e.msg)}).catch(function(e){console.log(e)})):t.$Message.error("验证失败!")})},handleReset:function(e){this.$refs[e].resetFields(),this.addUpdate=!1}},created:function(){(0,r.removeStore)("employeeID"),this.freshPage({pageNo:1,pageSize:10}),this.roleList({pageNo:1,pageSize:100})}}},867:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={username:[{required:!0,message:"用户名不能为空",trigger:"blur"}],email:[{required:!0,message:"邮箱不能为空",trigger:"blur"},{type:"email",message:"邮箱格式不对",trigger:"blur"}],mobile:[{required:!0,message:"手机不能为空",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{type:"string",min:8,max:20,message:"密码长度不小于8且不大于20",trigger:"blur"}]};t.default=r},868:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("\n        用户列表\n          "),a("Button",{attrs:{type:"primary",size:"small"},on:{click:e.refreshPageManual}},[a("Icon",{attrs:{type:"refresh"}}),e._v("\n            刷新\n          ")],1)],1),e._v(" "),a("Row",{staticClass:"functionWrapper"},[a("div",{staticClass:"btnsWrapper clearfix"},[a("Button",{attrs:{type:"error"},on:{click:function(t){e.ifDelete=!0}}},[e._v("删除用户")]),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:e.addUserBtn}},[e._v("添加用户")])],1)]),e._v(" "),a("Row",[a("Table",{attrs:{columns:e.column_frist,data:e.userpage,loading:e.ifLoading,border:""},on:{"on-selection-change":e.select}})],1),e._v(" "),a("Row",{staticClass:"pageWrapper"},[a("Page",{staticClass:"buttomPage",attrs:{total:e.pageNum,current:e.currentPageIdx,"show-elevator":""},on:{"on-change":e.changePage}})],1),e._v(" "),a("Modal",{attrs:{title:"删除用户"},on:{"on-ok":e.confirmDel,"on-cancel":function(t){e.$Message.info("已取消！")}},model:{value:e.ifDelete,callback:function(t){e.ifDelete=t},expression:"ifDelete"}},[a("p",[e._v("是否删除所选的"+e._s(e.delArr.length)+"项?")])]),e._v(" "),a("Modal",{attrs:{draggable:"",scrollable:"",title:e.title,"footer-hide":""},model:{value:e.addUpdate,callback:function(t){e.addUpdate=t},expression:"addUpdate"}},[a("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"用户名",prop:"username"}},[a("Input",{attrs:{placeholder:"请输入用户名",disabled:"修改"===e.title},model:{value:e.formValidate.username,callback:function(t){e.$set(e.formValidate,"username",t)},expression:"formValidate.username"}})],1),e._v(" "),a("FormItem",{attrs:{label:"邮箱",prop:"email"}},[a("Input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.formValidate.email,callback:function(t){e.$set(e.formValidate,"email",t)},expression:"formValidate.email"}})],1),e._v(" "),a("FormItem",{attrs:{label:"角色",prop:"role"}},[a("Select",{attrs:{placeholder:"请选择用户角色"},model:{value:e.formValidate.role,callback:function(t){e.$set(e.formValidate,"role",t)},expression:"formValidate.role"}},e._l(e.rolelist,function(t,r){return a("Option",{key:r,attrs:{value:t.roleId}},[e._v(e._s(t.roleName))])}))],1),e._v(" "),a("FormItem",{attrs:{label:"手机号",prop:"mobile"}},[a("Input",{attrs:{placeholder:"请输入手机号"},model:{value:e.formValidate.mobile,callback:function(t){e.$set(e.formValidate,"mobile",t)},expression:"formValidate.mobile"}})],1),e._v(" "),a("FormItem",{attrs:{label:"密码",prop:"password"}},[a("Input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.formValidate.password,callback:function(t){e.$set(e.formValidate,"password",t)},expression:"formValidate.password"}})],1),e._v(" "),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSubmit("formValidate")}}},[e._v("提交")]),e._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){e.handleReset("formValidate")}}},[e._v("清空")])],1)],1)],1)],1)],1)},o=[];r._withStripped=!0;var l={render:r,staticRenderFns:o};t.default=l}});